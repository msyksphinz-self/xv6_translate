第6章 ファイルシステム
=====================

ファイルシステムの目的は、データを構成し保存することである。
ファイルシステムは典型的に、ユーザおよびアプリケーション間でデータを共有し、「維持する」ということである。
従って、ファイルはコンピュータを再起動しても存在し続ける。

xv6のファイルシステムはUNIXライクなものを提供しており、ファイル、ディレクトリ、パス名(第0章を参照のこと)をサポートし、IDEディスクに保存することいによって永続性を確保することができる(第3章を参照)。
ファイルシステムはいくつかの困難を解決する必要がある。

* ファイルシステムはツリー構成のディレクトリおよびファイルを表現するためのデータ構造をディスク上に構築する必要がある。また各ファイルの内容を保持するための識別子と、どのディスクエリアがフリーであるかの情報を保持しておく必要がある。
* ファイルシステムは「クラッシュからのリカバリ」をサポートする必要がある。つまり、もしクラッシュが発生しても(例えば、電源遮断など)、再起動後にファイルシステムは正しく動作する必要がある。
クラッシュのリスクは、データの更新の歳に割り込みが発生し、ディスク上のデータの一貫性に影響が出ことである(例えば、ファイルが存在することと、フリー状態であることを示すブロックのマークなど)。
* 異なるプロセがファイルシステムを同時に扱うため、不変性を維持するためにこれらの操作の更新をする必要がある。
* ディスクへのアクセスはメモリへのアクセスに比べて格段に遅く、従ってファイルシステムは頻繁に利用されるブロックについてメモリ上にキャッシュする仕組みを提供する必要がある。

本章では、上記の困難をxv6ではどのように解決しているかについて説明する。
